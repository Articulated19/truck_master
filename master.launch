<!-- pass argument like: roslaunch truck_master master.launch gamepad_rate:=50.0  -->

<launch>

  <arg name="gamepad_rate" default="50.0" />
  <arg name="gamepad_type" default="ps3"/>

  <node name="cmd_node" pkg="truck_hw_api" type="cmd_node.py" />

  <node name="master" pkg="truck_master" type="master.py" />

  <node name="pid" pkg="truck_automatic_ctrl" type="pid.py"/>

  <node name="joy_node" pkg="joy" type="joy_node">
    <param name="autorepeat_rate" type="double" value="$(arg rate)" />
    <param name="coalesce_rate" type="double" value="$(eval 1.0 / arg('rate'))" />
  </node>

  <node name="gamepad" pkg="truck_manual_ctrl" type="gamepad.py">
    <param name="gamepad_rate" type="double" value="$(arg gamepad_rate)" />
    <param name="gamepad_type" type="string" value="$(arg gamepad_type)" />
  </node>
</launch>